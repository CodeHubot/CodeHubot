# Docker ÈÉ®ÁΩ≤ÊåáÂçó

> ‰ΩøÁî®Docker‰∏ÄÈîÆÈÉ®ÁΩ≤CodeHubot

---

## ÂâçÊèêÊù°‰ª∂

- Docker 20.10+
- Docker Compose 2.0+
- Ëá≥Â∞ë 4GB RAMÔºå20GB Á£ÅÁõòÁ©∫Èó¥

---

## üöÄ Âø´ÈÄüÈÉ®ÁΩ≤

### 1. ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè

```bash
cd docker
cp .env.example .env
# ‰ΩøÁî®ÁºñËæëÂô®ÊâìÂºÄ .env Êñá‰ª∂
vim .env  # Êàñ nano .env
```

#### üìå ÂøÖÈ°ª‰øÆÊîπÁöÑÈÖçÁΩÆÔºà5È°πÔºâ

‰ª•‰∏ãÈÖçÁΩÆ**ÂøÖÈ°ª‰øÆÊîπ**ÔºåÂê¶ÂàôÁ≥ªÁªüÊó†Ê≥ïÊ≠£Â∏∏ÂêØÂä®ÊàñÂäüËÉΩÂèóÈôêÔºö

**1. SECRET_KEY** - JWTÂØÜÈí•ÔºàÂøÖÈ°ª‰øÆÊîπÔºâ
```bash
# ‚ö†Ô∏è Áîü‰∫ßÁéØÂ¢ÉÂøÖÈ°ª‰øÆÊîπÔºå‰∏çË¶Å‰ΩøÁî®Á§∫‰æãÂØÜÈí•ÔºÅ
SECRET_KEY=PLEASE-CHANGE-ME-generate-your-own-secret-key-here

# üîê ÁîüÊàêÂº∫ÂØÜÈí•ÔºàÊé®ËçêÔºâÔºö
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
# Â§çÂà∂ÁîüÊàêÁöÑÂØÜÈí•ÔºåÊõøÊç¢‰∏äÈù¢ÁöÑÂÄº
```

**2. INTERNAL_API_KEY** - ÂÜÖÈÉ®ÊúçÂä°ËÆ§ËØÅÔºàÂøÖÈ°ª‰øÆÊîπÔºâ
```bash
# ‚ö†Ô∏è Áîü‰∫ßÁéØÂ¢ÉÂøÖÈ°ª‰øÆÊîπÔºå‰∏çË¶Å‰ΩøÁî®Á§∫‰æãÂØÜÈí•ÔºÅ
INTERNAL_API_KEY=PLEASE-CHANGE-ME-generate-your-own-internal-api-key-here

# üîê ÁîüÊàêÊñπÊ≥ïÔºàÂêåSECRET_KEYÔºâÔºö
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

**3. Êï∞ÊçÆÂ∫ìÂØÜÁ†Å**ÔºàÂª∫ËÆÆ‰øÆÊîπÔºâ
```bash
MYSQL_PASSWORD=your_secure_password
MYSQL_ROOT_PASSWORD=root_password

# üí° Âª∫ËÆÆ‰ΩøÁî®Âº∫ÂØÜÁ†ÅÔºåËá≥Â∞ë8‰ΩçÔºåÂåÖÂê´Â≠óÊØçÂíåÊï∞Â≠ó
```

**4. DASHSCOPE_API_KEY** - AIÂ§ßÊ®°ÂûãÂØÜÈí•ÔºàAIÂäüËÉΩÂøÖÈúÄÔºâ
```bash
DASHSCOPE_API_KEY=sk-your-dashscope-api-key-here

# üìå Ëé∑ÂèñÊñπÊ≥ïÔºö
# 1. ËÆøÈóÆ https://dashscope.console.aliyun.com/apiKey
# 2. ÁôªÂΩïÈòøÈáå‰∫ëË¥¶Âè∑ÔºåÂºÄÈÄö DashScope ÊúçÂä°
# 3. ÂàõÂª∫APIÂØÜÈí•ÔºåÂ§çÂà∂ÂØÜÈí•ÂÄº
```

**5. DEVICE_MQTT_BROKER** - ËÆæÂ§áËøûÊé•Âú∞ÂùÄÔºàÂ¶ÇÊúâIoTËÆæÂ§áÔºâ
```bash
DEVICE_MQTT_BROKER=mqtt.example.com

# ‚ö†Ô∏è ÈáçË¶ÅÔºöËøôÊòØÂëäËØâÁâ©ËÅîÁΩëËÆæÂ§áÂ∫îËØ•ËøûÊé•Âà∞Âì™‰∏™MQTTÊúçÂä°Âô®
# ÂøÖÈ°ªÂ°´ÂÜôËÆæÂ§áÂèØ‰ª•ËÆøÈóÆÁöÑÂ§ñÈÉ®Âú∞ÂùÄÔºàÂüüÂêçÊàñÂÖ¨ÁΩëIPÔºâ
# Á§∫‰æãÔºö
#   - ÂüüÂêçÔºömqtt.yourdomain.com
#   - ÂÖ¨ÁΩëIPÔºö123.45.67.89
#   - Â±ÄÂüüÁΩëIPÔºö192.168.1.100
```

---

#### üéØ Êé®ËçêÈÖçÁΩÆÔºàÂèØÈÄâÔºåÊèêÂçá‰ΩìÈ™åÔºâ

**1. ÁÆ°ÁêÜÂëòË¥¶Âè∑Ëá™Âä®ÂàõÂª∫**ÔºàÊé®ËçêËÆæÁΩÆÔºâ
```bash
ADMIN_USERNAME=admin
ADMIN_PASSWORD=Admin@123456

# üí° Â¶ÇÊûúËÆæÁΩÆ‰∫ÜÂØÜÁ†ÅÔºåÁ≥ªÁªüÈ¶ñÊ¨°ÂêØÂä®Êó∂‰ºöËá™Âä®ÂàõÂª∫ÁÆ°ÁêÜÂëòË¥¶Âè∑
# üí° Â¶ÇÊûú‰∏çËÆæÁΩÆÔºàÁïôÁ©∫ÔºâÔºåÈúÄË¶ÅÈÄöËøáÂâçÁ´ØÊ≥®ÂÜåÈ°µÈù¢ÊâãÂä®ÂàõÂª∫Ë¥¶Âè∑
```

**2. ÈªòËÆ§Â§ßÊ®°ÂûãËá™Âä®ÂàõÂª∫**ÔºàÊé®ËçêËÆæÁΩÆÔºâ
```bash
# ÂèñÊ∂àÊ≥®Èáä‰ª•‰∏ãË°åÔºåÂêØÁî®ÈªòËÆ§Â§ßÊ®°ÂûãÔºàÈÄö‰πâÂçÉÈóÆÔºâ
# QWEN_API_KEY=sk-your-qwen-api-key-here
# QWEN_MODEL_NAME=qwen-turbo

# üí° Â¶ÇÊûú‰∏çËÆæÁΩÆÔºåÈúÄË¶ÅÂú®ÁïåÈù¢‰∏≠ÊâãÂä®ÂàõÂª∫Â§ßÊ®°ÂûãÈÖçÁΩÆ
```

**3. ÈÇÆ‰ª∂ÊúçÂä°ÈÖçÁΩÆ**ÔºàÂØÜÁ†ÅÈáçÁΩÆÂäüËÉΩÔºâ
```bash
# ÂèñÊ∂àÊ≥®Èáä‰ª•‰∏ãË°åÔºåÂêØÁî®ÈÇÆ‰ª∂ÊúçÂä°Ôºà163ÈÇÆÁÆ±Á§∫‰æãÔºâ
# MAIL_USERNAME=your-email@163.com
# MAIL_PASSWORD=your-authorization-code
# MAIL_FROM=your-email@163.com
# MAIL_SERVER=smtp.163.com

# üìå 163ÈÇÆÁÆ±ÈÖçÁΩÆÊ≠•È™§Ôºö
# 1. ÁôªÂΩï163ÈÇÆÁÆ± -> ËÆæÁΩÆ -> POP3/SMTP/IMAP
# 2. ÂºÄÂêØSMTPÊúçÂä°
# 3. ÁîüÊàêÊéàÊùÉÁ†ÅÔºà‰∏çÊòØÈÇÆÁÆ±ÂØÜÁ†ÅÔºÅÔºâ
# 4. Â§çÂà∂ÊéàÊùÉÁ†ÅÂà∞ MAIL_PASSWORD
```

---

#### üîß È´òÁ∫ßÈÖçÁΩÆÔºàÈÄöÂ∏∏‰∏çÈúÄË¶Å‰øÆÊîπÔºâ

**Á´ØÂè£ÈÖçÁΩÆ**ÔºàÂ¶ÇÊûúÁ´ØÂè£ÂÜ≤Á™ÅÊâçÈúÄË¶Å‰øÆÊîπÔºâ
```bash
BACKEND_PORT=8000
FRONTEND_PORT=8080
CONFIG_SERVICE_PORT=8001

# üí° Â¶ÇÊûúÁ´ØÂè£Ë¢´Âç†Áî®ÔºåÂèØ‰ª•‰øÆÊîπ‰∏∫ÂÖ∂‰ªñÁ´ØÂè£
```

**TokenÊúâÊïàÊúü**ÔºàÈªòËÆ§ÂÄºÂ∑≤‰ºòÂåñÔºåÈÄöÂ∏∏‰∏çÈúÄË¶Å‰øÆÊîπÔºâ
```bash
ACCESS_TOKEN_EXPIRE_MINUTES=120    # 2Â∞èÊó∂
REFRESH_TOKEN_EXPIRE_MINUTES=10080 # 7Â§©
```

**MQTTÈÖçÁΩÆ**ÔºàÂÜÖÈÉ®ÊúçÂä°ËøûÊé•ÔºåÈÄöÂ∏∏‰∏çÈúÄË¶Å‰øÆÊîπÔºâ
```bash
MQTT_BROKER_HOST=mqtt
MQTT_BROKER_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=

# üí° Ëøô‰∫õÊòØÂÜÖÈÉ®ÊúçÂä°ËøûÊé•MQTTÁöÑÈÖçÁΩÆÔºåÈÄöÂ∏∏‰øùÊåÅÈªòËÆ§Âç≥ÂèØ
```

---

#### ‚úÖ ÈÖçÁΩÆÂÆåÊàêÊ£ÄÊü•Ê∏ÖÂçï

Âú®ÂêØÂä®ÊúçÂä°ÂâçÔºåËØ∑Á°ÆËÆ§Ôºö

- [ ] ‚úÖ Â∑≤ÁîüÊàêÂπ∂ËÆæÁΩÆ `SECRET_KEY`Ôºà‰∏çÊòØÁ§∫‰æãÂØÜÈí•Ôºâ
- [ ] ‚úÖ Â∑≤ÁîüÊàêÂπ∂ËÆæÁΩÆ `INTERNAL_API_KEY`Ôºà‰∏çÊòØÁ§∫‰æãÂØÜÈí•Ôºâ
- [ ] ‚úÖ Â∑≤‰øÆÊîπÊï∞ÊçÆÂ∫ìÂØÜÁ†ÅÔºà‰∏çÊòØ `your_secure_password`Ôºâ
- [ ] ‚úÖ Â∑≤ËÆæÁΩÆ `DASHSCOPE_API_KEY`ÔºàÂ¶ÇÈúÄAIÂäüËÉΩÔºâ
- [ ] ‚úÖ Â∑≤ËÆæÁΩÆ `DEVICE_MQTT_BROKER`ÔºàÂ¶ÇÊúâIoTËÆæÂ§áÔºâ
- [ ] üéØ Âª∫ËÆÆËÆæÁΩÆ `ADMIN_PASSWORD`ÔºàËá™Âä®ÂàõÂª∫ÁÆ°ÁêÜÂëòÔºâ
- [ ] üéØ Âª∫ËÆÆËÆæÁΩÆÈÇÆ‰ª∂ÊúçÂä°ÔºàÂ¶ÇÈúÄÂØÜÁ†ÅÈáçÁΩÆÂäüËÉΩÔºâ

### 2. ‰∏ÄÈîÆÈÉ®ÁΩ≤

```bash
./deploy.sh
```

ÈÄâÊã©ÈÉ®ÁΩ≤Ê®°ÂºèÔºö
- `1` - Ê†áÂáÜÊ®°ÂºèÔºàÂÜÖÁΩÆMySQLÔºâ
- `2` - ÂºÄÂèëÊ®°ÂºèÔºà‰ªÖÂü∫Á°ÄÊúçÂä°Ôºâ
- `3` - Â§ñÈÉ®Êï∞ÊçÆÂ∫ìÊ®°Âºè

### 3. ËÆøÈóÆÁ≥ªÁªü

- ÂâçÁ´ØÔºöhttp://localhost:8080
- ÂêéÁ´ØAPIÔºöhttp://localhost:8000/docs
- ÈªòËÆ§Ë¥¶Âè∑Ôºö`admin` / `admin123`

---

## ‚ö†Ô∏è ÈÉ®ÁΩ≤ÂêéÂøÖÈ°ªÈÖçÁΩÆÔºàÈáçË¶ÅÔºâ

### ÈÖçÁΩÆËÆæÂ§áMQTTÊúçÂä°Âô®Âú∞ÂùÄ

Â¶ÇÊûú‰Ω†ËÆ°Âàí‰ΩøÁî®Áâ©ËÅîÁΩëËÆæÂ§áÂäüËÉΩÔºå**ÂøÖÈ°ª**Âú®ÁÆ°ÁêÜÂπ≥Âè∞‰∏≠ÈÖçÁΩÆËÆæÂ§áËøûÊé•ÁöÑMQTTÊúçÂä°Âô®Âú∞ÂùÄÔºö

#### ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÈÖçÁΩÆÔºü

ËÆæÂ§áÂú®ÂêØÂä®Êó∂‰ºöÂêëÈÖçÁΩÆÊúçÂä°Ôºàconfig-serviceÔºâËØ∑Ê±ÇMQTTËøûÊé•‰ø°ÊÅØ„ÄÇËøô‰∏™ÈÖçÁΩÆÂëäËØâËÆæÂ§áÂ∫îËØ•ËøûÊé•Âà∞Âì™‰∏™MQTTÊúçÂä°Âô®„ÄÇ

#### ÈÖçÁΩÆÊ≠•È™§Ôºö

1. **ÁôªÂΩïÁÆ°ÁêÜÂπ≥Âè∞**
   ```
   ËÆøÈóÆÔºöhttp://‰Ω†ÁöÑÊúçÂä°Âô®IP:8080
   ‰ΩøÁî®ÁÆ°ÁêÜÂëòË¥¶Âè∑ÁôªÂΩï
   ```

2. **ËøõÂÖ•MQTTÈÖçÁΩÆÈ°µÈù¢**
   ```
   ÂØºËà™Ë∑ØÂæÑÔºöÁ≥ªÁªüÁÆ°ÁêÜ ‚Üí MQTTÈÖçÁΩÆ
   ```

3. **Â°´ÂÜôÈÖçÁΩÆ‰ø°ÊÅØ**
   ```
   MQTT BrokerÂú∞ÂùÄÔºö‰Ω†ÁöÑÊúçÂä°Âô®Â§ñÈÉ®ÂèØËÆøÈóÆÂú∞ÂùÄ
   MQTTÁ´ØÂè£Ôºö1883ÔºàÈªòËÆ§Ôºâ
   ÂêØÁî®SSLÔºöfalseÔºàÈªòËÆ§Ôºâ
   ```

4. **‰øùÂ≠òÂπ∂È™åËØÅ**
   - ÁÇπÂáª"‰øùÂ≠ò"ÊåâÈíÆ
   - ÈÖçÁΩÆ‰ºöËá™Âä®ÂêåÊ≠•Âà∞ÈÖçÁΩÆÊúçÂä°
   - Êñ∞ËÆæÂ§áÂêØÂä®Êó∂‰ºöËá™Âä®Ëé∑ÂèñËøô‰∏™ÈÖçÁΩÆ

#### Âú∞ÂùÄÂ°´ÂÜôÁ§∫‰æãÔºö

| Âú∫ÊôØ | MQTT BrokerÂú∞ÂùÄ | ËØ¥Êòé |
|------|----------------|------|
| ÂÖ¨ÁΩëÈÉ®ÁΩ≤ | `mqtt.yourdomain.com` | ‰ΩøÁî®ÂüüÂêçÔºàÊé®ËçêÔºâ |
| ÂÖ¨ÁΩëÈÉ®ÁΩ≤ | `123.45.67.89` | ‰ΩøÁî®ÂÖ¨ÁΩëIP |
| Â±ÄÂüüÁΩëÈÉ®ÁΩ≤ | `192.168.1.100` | ‰ΩøÁî®Â±ÄÂüüÁΩëIP |
| Êú¨Âú∞ÂºÄÂèë | `192.168.1.100` | ÂºÄÂèëÁîµËÑëÁöÑÂ±ÄÂüüÁΩëIPÔºà‚ö†Ô∏è ‰∏çËÉΩÁî®localhostÔºâ|

#### ÈÖçÁΩÆÂ∑•‰ΩúÊµÅÁ®ãÔºö

```
ËÆæÂ§áÂêØÂä®
  ‚Üì
ËØ∑Ê±ÇÈÖçÁΩÆÊúçÂä° (http://ÊúçÂä°Âô®Âú∞ÂùÄ:8001)
  ‚Üì
Ëé∑ÂèñMQTTÈÖçÁΩÆÔºà‰ªéÊï∞ÊçÆÂ∫ìËØªÂèñÔºâ
  ‚Üì
ËøûÊé•MQTTÊúçÂä°Âô®Ôºà‰ΩøÁî®ÈÖçÁΩÆÁöÑÂú∞ÂùÄÔºâ
  ‚Üì
ÂºÄÂßãÈÄö‰ø°
```

#### Ê≥®ÊÑè‰∫ãÈ°πÔºö

> ‚ö†Ô∏è **ÈáçË¶Å**Ôºö
> - ÈÖçÁΩÆÁöÑÂú∞ÂùÄÂøÖÈ°ªÊòØËÆæÂ§áËÉΩÂ§üËÆøÈóÆÁöÑÂ§ñÈÉ®Âú∞ÂùÄ
> - Â¶ÇÊûú‰ΩøÁî®ÂüüÂêçÔºåÁ°Æ‰øùDNSËß£ÊûêÊ≠£Â∏∏
> - Â¶ÇÊûú‰ΩøÁî®Â±ÄÂüüÁΩëIPÔºåÁ°Æ‰øùËÆæÂ§áÂíåÊúçÂä°Âô®Âú®Âêå‰∏ÄÁΩëÁªú
> - ÈÖçÁΩÆÊúçÂä°Âú∞ÂùÄÈÄöÂ∏∏ÂíåÁÆ°ÁêÜÂπ≥Âè∞Âú∞ÂùÄÁõ∏ÂêåÔºà‰ªÖÁ´ØÂè£‰∏çÂêåÔºâ
> - ‰øÆÊîπÈÖçÁΩÆÂêéÔºåÊñ∞ËÆæÂ§á‰ºöËá™Âä®Ëé∑ÂèñÊñ∞ÈÖçÁΩÆÔºàÂ∑≤ËøûÊé•ÁöÑËÆæÂ§áÈúÄË¶ÅÈáçÂêØÔºâ

#### È™åËØÅÈÖçÁΩÆÔºö

1. **Êü•ÁúãÈÖçÁΩÆÊúçÂä°Êó•Âøó**Ôºö
   ```bash
   docker-compose logs -f config-service
   ```
   Â∫îËØ•ÁúãÂà∞ËÆæÂ§áËØ∑Ê±ÇÈÖçÁΩÆÁöÑÊó•Âøó

2. **Êü•ÁúãMQTTÊúçÂä°Êó•Âøó**Ôºö
   ```bash
   docker-compose logs -f mqtt
   ```
   Â∫îËØ•ÁúãÂà∞ËÆæÂ§áËøûÊé•ÁöÑÊó•Âøó

---

## üì¶ ÈÉ®ÁΩ≤Ê®°ÂºèËØ¥Êòé

### Ê†áÂáÜÊ®°ÂºèÔºàÊé®ËçêÔºâ

‰ΩøÁî®ÂÜÖÁΩÆMySQLÊï∞ÊçÆÂ∫ìÔºåÂåÖÂê´ÊâÄÊúâÊúçÂä°Ôºö

```bash
./deploy.sh
# ÈÄâÊã© 1) Ê†áÂáÜÊ®°ÂºèÔºàÂÜÖÁΩÆMySQLÔºâ
```

ÊúçÂä°ÂåÖÊã¨Ôºö
- MySQL„ÄÅRedis„ÄÅMQTT Broker
- ÂêéÁ´ØAPI„ÄÅÈÖçÁΩÆÊúçÂä°„ÄÅMQTTÊúçÂä°
- Celery Worker„ÄÅFlowerÁõëÊéß
- ÂâçÁ´ØWebÂ∫îÁî®

### Â§ñÈÉ®Êï∞ÊçÆÂ∫ìÊ®°Âºè

‰ΩøÁî®Â§ñÈÉ®MySQLÊï∞ÊçÆÂ∫ìÔºö

```bash
# 1. ÈÖçÁΩÆÂ§ñÈÉ®Êï∞ÊçÆÂ∫ìËøûÊé•
cd docker
cp .env.external-db.example .env
# ÁºñËæë .env Êñá‰ª∂

# 2. ÈÉ®ÁΩ≤
cd ..
./deploy.sh
# ÈÄâÊã© 3) Â§ñÈÉ®Êï∞ÊçÆÂ∫ìÊ®°Âºè
```

**Êï∞ÊçÆÂ∫ìÂáÜÂ§á**Ôºö
```sql
CREATE DATABASE aiot_admin CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'aiot_user'@'%' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON aiot_admin.* TO 'aiot_user'@'%';
FLUSH PRIVILEGES;

-- ÂØºÂÖ•Êï∞ÊçÆÂ∫ìÁªìÊûÑ
SOURCE SQL/init_database.sql;
```

---

## üõ†Ô∏è ÊúçÂä°ÁÆ°ÁêÜ

### Êü•ÁúãÁä∂ÊÄÅ

```bash
docker-compose -f docker/docker-compose.yml ps
```

### Êü•ÁúãÊó•Âøó

```bash
# ÊâÄÊúâÊúçÂä°
docker-compose -f docker/docker-compose.yml logs -f

# ÁâπÂÆöÊúçÂä°
docker-compose -f docker/docker-compose.yml logs -f backend
```

### ÈáçÂêØÊúçÂä°

```bash
# ÈáçÂêØÊâÄÊúâ
docker-compose -f docker/docker-compose.yml restart

# ÈáçÂêØÁâπÂÆöÊúçÂä°
docker-compose -f docker/docker-compose.yml restart backend
```

### ÂÅúÊ≠¢ÊúçÂä°

```bash
./deploy.sh
# ÈÄâÊã© 9) ÂÅúÊ≠¢ÊâÄÊúâÊúçÂä°

# ÊàñÊâãÂä®ÂÅúÊ≠¢
docker-compose -f docker/docker-compose.yml down
```

---

## üîß Â∏∏ËßÅÈóÆÈ¢ò

### Á´ØÂè£Ë¢´Âç†Áî®

```bash
# Ê£ÄÊü•Á´ØÂè£Âç†Áî®
lsof -i:8000  # ÂêéÁ´Ø
lsof -i:3306  # MySQL

# ‰øÆÊîπÁ´ØÂè£ÔºàÁºñËæë docker/.envÔºâ
BACKEND_PORT=8001
MYSQL_PORT=3307
```

### Êï∞ÊçÆÂ∫ìËøûÊé•Â§±Ë¥•

```bash
# Ê£ÄÊü•MySQLÁä∂ÊÄÅ
docker-compose -f docker/docker-compose.yml logs mysql

# ÈáçÂêØMySQL
docker-compose -f docker/docker-compose.yml restart mysql

# Á≠âÂæÖMySQLÂÆåÂÖ®ÂêØÂä®ÔºàÈ¶ñÊ¨°ÂêØÂä®ÈúÄË¶ÅÂàùÂßãÂåñÔºâ
docker-compose -f docker/docker-compose.yml logs -f mysql
```

### ÊúçÂä°Êó†Ê≥ïÂêØÂä®

```bash
# 1. Êü•ÁúãËØ¶ÁªÜÊó•Âøó
docker-compose -f docker/docker-compose.yml logs [ÊúçÂä°Âêç]

# 2. Ê£ÄÊü•ÈÖçÁΩÆ
docker-compose -f docker/docker-compose.yml config

# 3. ÈáçÊñ∞ÊûÑÂª∫
docker-compose -f docker/docker-compose.yml up -d --build
```

### Ê∏ÖÁêÜÈáçÊñ∞ÈÉ®ÁΩ≤

```bash
# ÂÅúÊ≠¢Âπ∂Âà†Èô§ÊâÄÊúâÂÆπÂô®
docker-compose -f docker/docker-compose.yml down

# Âà†Èô§Êï∞ÊçÆÂç∑Ôºà‚ö†Ô∏è ‰ºö‰∏¢Â§±Êï∞ÊçÆÔºâ
docker-compose -f docker/docker-compose.yml down -v

# ÈáçÊñ∞ÈÉ®ÁΩ≤
./deploy.sh
```

---

## üìä Êï∞ÊçÆÂ§á‰ªΩ

### Â§á‰ªΩÊï∞ÊçÆÂ∫ì

```bash
# Â§á‰ªΩ
docker-compose -f docker/docker-compose.yml exec mysql \
  mysqldump -uroot -p aiot_admin > backup_$(date +%Y%m%d).sql

# ÊÅ¢Â§ç
docker-compose -f docker/docker-compose.yml exec -T mysql \
  mysql -uroot -p aiot_admin < backup.sql
```

### Â§á‰ªΩ‰∏ä‰º†Êñá‰ª∂

```bash
# Êñá‰ª∂Â≠òÂÇ®Âú®Êï∞ÊçÆÂç∑‰∏≠
docker volume ls | grep codehubot

# Â§á‰ªΩÊï∞ÊçÆÂç∑
docker run --rm -v codehubot_uploads_data:/data \
  -v $(pwd):/backup alpine tar czf /backup/uploads_backup.tar.gz /data
```

---

## üîí Áîü‰∫ßÁéØÂ¢ÉÂª∫ËÆÆ

### ÂÆâÂÖ®ÈÖçÁΩÆ

1. ‚úÖ ‰øÆÊîπÊâÄÊúâÈªòËÆ§ÂØÜÁ†Å
2. ‚úÖ ‰ΩøÁî®Âº∫ÂØÜÈí•ÔºàËá≥Â∞ë32Â≠óÁ¨¶Ôºâ
3. ‚úÖ ÈÖçÁΩÆÈò≤ÁÅ´Â¢ôËßÑÂàô
4. ‚úÖ ÂêØÁî®HTTPSÔºàÈÖçÁΩÆNginxÔºâ
5. ‚úÖ ÂÆöÊúüÂ§á‰ªΩÊï∞ÊçÆ

### ÊÄßËÉΩ‰ºòÂåñ

```bash
# docker/.env ‰∏≠ÈÖçÁΩÆ
ENVIRONMENT=production
LOG_LEVEL=WARNING

# Ë∞ÉÊï¥Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
```

### ÁõëÊéß

```bash
# FlowerÁõëÊéßÔºàCelery‰ªªÂä°Ôºâ
http://localhost:5555

# Êü•ÁúãÂÆπÂô®ËµÑÊ∫ê‰ΩøÁî®
docker stats

# Êü•ÁúãÂÆπÂô®Êó•ÂøóÂ§ßÂ∞è
docker system df
```

---

## üîó Áõ∏ÂÖ≥ÊñáÊ°£

- [Âø´ÈÄüÂèÇËÄÉ](quick-reference.md) - Â∏∏Áî®ÂëΩ‰ª§
- [ÊâãÂä®ÈÉ®ÁΩ≤](manual-deployment.md) - ‰º†ÁªüÈÉ®ÁΩ≤ÊñπÂºè
- [ÂºÄÂèëÁéØÂ¢É](development-guide.md) - Êú¨Âú∞ÂºÄÂèëÈÖçÁΩÆ
- [ÁéØÂ¢ÉÂèòÈáèËØ¥Êòé](../../docs/ÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆËØ¥Êòé.md) - ËØ¶ÁªÜÈÖçÁΩÆ

---

## üìû Ëé∑ÂèñÂ∏ÆÂä©

ÈÅáÂà∞ÈóÆÈ¢òÔºü

1. Êü•Áúã[Âø´ÈÄüÂèÇËÄÉ](quick-reference.md)‰∏≠ÁöÑÊïÖÈöúÊéíÊü•
2. Êü•ÁúãÊó•ÂøóÔºö`docker-compose logs [ÊúçÂä°Âêç]`
3. Êèê‰∫§IssueÔºöhttps://gitee.com/codehubot/CodeHubot/issues

---

**Êõ¥Êñ∞Êó∂Èó¥**Ôºö2026-01-15
